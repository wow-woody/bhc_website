<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/Paperlogy.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/style_bhc.css">
    <link rel="stylesheet" href="./css/bhc_header.css">
    <link rel="stylesheet" href="./css/bhc_footer.css">
    <link rel="stylesheet" href="./css/sub_order.css">
    <script src="./js/bhc_header_footer.js"></script>
</head>

<body>
    <header id="header"></header>

    <main>
        <section class="order_wrap">
            <div class="inner">
                <div class="order_left">
                    <h2>콰삭톡 콤보</h2>
                    <p><img src="./images/Menu_img-1_410x271.jpg" alt="콰삭톡 치킨"></p>
                </div>
                <div class="order_right">
                    <div class="order_list">
                        <h3 class="clean">시즈닝 추가</h3>
                        <div class="seas_order_box">
                            <div class="add_seas">
                                <label><input type="checkbox"><span class="bhc_checkbox"></span>트리플 페퍼톡 (+800원)</label>
                                <label><input type="checkbox"><span class="bhc_checkbox"></span>버터 비스킷톡 (+800원)</label>
                                <label><input type="checkbox"><span class="bhc_checkbox"></span>스윗 칠리톡 (+800원)</label>
                            </div>
                        </div>
                    </div>
                    <div class="order_list">
                        <h3 class="clean">수량</h3>
                        <div class="order_box count">
                            <button class="minus">-</button>
                            <span>0</span>
                            <button class="plus">+</button>
                        </div>
                    </div>
                    <div class="order_list">
                        <h3>반마리 추가</h3>
                        <div class="half_order_box sideT order">
                            <div class="add half_chicken">
                                <div class="img"><img src="./images/order_page/half_FC.png" alt="후라이드 반마리(뼈)"></div>
                                <div class="menu">
                                    <p>후라이드 반마리(뼈)</p>
                                    <span>12,000원</span>
                                </div>
                                <div class="counter">
                                    <button class="minus">-</button>
                                    <span>0</span>
                                    <button class="plus">+</button>
                                </div>
                            </div>
                            <div class="add half_chicken">
                                <div class="img"><img src="./images/order_page/half_HFC.png" alt="핫후라이드 반마리(뼈)"></div>
                                <div class="menu">
                                    <p>핫후라이드 반마리(뼈)</p>
                                    <span>12,500원</span>
                                </div>
                                <div class="counter">
                                    <button class="minus">-</button>
                                    <span>0</span>
                                    <button class="plus">+</button>
                                </div>
                            </div>
                            <div class="add half_chicken">
                                <div class="img"><img src="./images/order_page/half_MC.png" alt="맛초킹 반마리"></div>
                                <div class="menu">
                                    <p>맛초킹 반마리</p>
                                    <span>12,500원</span>
                                </div>
                                <div class="counter">
                                    <button class="minus">-</button>
                                    <span>0</span>
                                    <button class="plus">+</button>
                                </div>
                            </div>
                            <div class="add half_chicken">
                                <div class="img"><img src="./images/order_page/half_FSK.png" alt="콰삭킹 순살 하프"></div>
                                <div class="menu">
                                    <p>콰삭킹 순살 하프</p>
                                    <span>13,500원</span>
                                </div>
                                <div class="counter">
                                    <button class="minus">-</button>
                                    <span>0</span>
                                    <button class="plus">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="order_list">
                        <h3>사이드 추가</h3>
                        <div class="order_box sideT order">
                            <div class="fitH">
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_Mu.png" alt="치킨무"></div>
                                    <div class="menu">
                                        <p>치킨무</p>
                                        <span>1,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_Nachos.png" alt="뿌링클나쵸"></div>
                                    <div class="menu">
                                        <p>뿌링클나쵸</p>
                                        <span>2,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_Brice.png" alt="뿌링클라이스"></div>
                                    <div class="menu">
                                        <p>뿌링클라이스</p>
                                        <span>4,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_MCrice.png" alt="맛초킹라이스"></div>
                                    <div class="menu">
                                        <p>맛초킹라이스</p>
                                        <span>4,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_taco.png" alt="맛초타코야끼"></div>
                                    <div class="menu">
                                        <p>맛초타코야끼</p>
                                        <span>5,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_BBchee.png" alt="뿌링치즈볼"></div>
                                    <div class="menu">
                                        <p>뿌링치즈볼</p>
                                        <span>6,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_SWchee.png" alt="달콤바식치즈볼"></div>
                                    <div class="menu">
                                        <p>달콤바식치즈볼</p>
                                        <span>5,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_tteok.png" alt="분모자로제떡볶이"></div>
                                    <div class="menu">
                                        <p>분모자로제떡볶이</p>
                                        <span>6,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_churo.png" alt="치로스"></div>
                                    <div class="menu">
                                        <p>치로스</p>
                                        <span>6,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_BBpo.png" alt="뿌링감자"></div>
                                    <div class="menu">
                                        <p>뿌링감자</p>
                                        <span>5,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_sotteok.png" alt="빨간소떡"></div>
                                    <div class="menu">
                                        <p>빨간소떡</p>
                                        <span>3,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_BBsotteok.png" alt="뿌링소떡"></div>
                                    <div class="menu">
                                        <p>뿌링소떡</p>
                                        <span>4,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_BBcondog.png" alt="뿌링핫도그"></div>
                                    <div class="menu">
                                        <p>뿌링핫도그</p>
                                        <span>6,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_wedge.png" alt="웨지감자"></div>
                                    <div class="menu">
                                        <p>웨지감자</p>
                                        <span>6,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_sticks.png" alt="뿌링치즈스틱"></div>
                                    <div class="menu">
                                        <p>뿌링치즈스틱</p>
                                        <span>5,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_BBjinmi.png" alt="뿌링진미채튀김">
                                    </div>
                                    <div class="menu">
                                        <p>뿌링진미채튀김</p>
                                        <span>6,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_cajun.png" alt="케이준프라이"></div>
                                    <div class="menu">
                                        <p>케이준프라이</p>
                                        <span>4,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add side">
                                    <div class="img"><img src="./images/order_page/side_Cstick.png" alt="치킨스넥"></div>
                                    <div class="menu">
                                        <p>치킨스넥</p>
                                        <span>11,000원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="order_list">
                        <h3>음료 & 소스</h3>
                        <div class="order_box drinkT order">
                            <div class="fitH">
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/s_haba.png" alt="스윗하바네로소스"></div>
                                    <div class="menu">
                                        <p>스윗하바네로소스</p>
                                        <span>1,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/s_BB.png" alt="뿌링뿌링소스"></div>
                                    <div class="menu">
                                        <p>뿌링뿌링소스</p>
                                        <span>2,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/s_map.png" alt="맵소사소스"></div>
                                    <div class="menu">
                                        <p>맵소사소스</p>
                                        <span>2,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/s_yang.png" alt="양념소스"></div>
                                    <div class="menu">
                                        <p>양념소스</p>
                                        <span>500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/s_mus.png" alt="머스타드소스"></div>
                                    <div class="menu">
                                        <p>머스타드소스</p>
                                        <span>500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/d_c.png" alt="콜라 1.25L"></div>
                                    <div class="menu">
                                        <p>콜라 1.25L</p>
                                        <span>2,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                                <div class="add drinkS">
                                    <div class="img"><img src="./images/order_page/d_sp.png" alt="사이다 1.25L"></div>
                                    <div class="menu">
                                        <p>사이다 1.25L</p>
                                        <span>2,500원</span>
                                    </div>
                                    <div class="counter">
                                        <button class="minus">-</button>
                                        <span>0</span>
                                        <button class="plus">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order_bottom">
                <div class="total_order">
                    <div class="category" id="basic">
                        <p>치킨</p>
                        <strong></strong>
                    </div>
                    <div class="category sideCategory line">
                        <p>사이드</p>
                        <strong></strong>
                    </div>
                    <div class="category drinkCategory line">
                        <p>음료&소스</p>
                        <strong></strong>
                    </div>
                </div>
                <div class="total">
                    <p>총 <strong>0</strong>원</p>
                    <span>결제하기</span>
                </div>
            </div>
        </section>
    </main>

    <footer id="footer"></footer>
</body>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            //결체창
            const paymentBar = document.querySelector(".order_bottom");
            const footer = document.querySelector("#footer");

            function handleScroll() {
                const footerTop = footer.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;

                if (footerTop <= windowHeight) {
                    // 푸터가 보이기 시작하면 결제창을 푸터 위에 고정
                    paymentBar.classList.add('sticky-end');
                    const offsetTop = footer.offsetTop - paymentBar.offsetHeight;
                    paymentBar.style.top = offsetTop + 'px';
                } else {
                    // 푸터에 안 닿았을 땐 화면 하단에 고정
                    paymentBar.classList.remove('sticky-end');
                    paymentBar.style.top = '';
                }
            }

            window.addEventListener('scroll', handleScroll);
            window.addEventListener('resize', handleScroll);

            // 처음 로딩 시에도 위치 체크
            handleScroll();


            //
            //
            //주문 count
            const total = document.querySelector(".total p strong");

            //기본치킨
            const basPrice = 23000;
            let baseCount = 1;
            const baseSpan = document.querySelector(".count span");
            const baseM = document.querySelector(".count .minus");
            const baseP = document.querySelector(".count .plus");

            baseSpan.innerHTML = baseCount;

            baseP.addEventListener("click", () => {
                baseCount++;
                baseSpan.innerHTML = baseCount;
                updateTotal();
            })
            baseM.addEventListener("click", () => {
                if (baseCount > 1) {
                    baseCount--;
                    baseSpan.innerHTML = baseCount;
                    updateTotal();
                }
            })

            // 시즈닝 체크박스
            const seasCheck = document.querySelectorAll('.add_seas input[type="checkbox"]');

            seasCheck.forEach(checkbox => {
                checkbox.addEventListener('change', updateTotal);
            });

            function updateTotal() {
                let totalSum = basPrice * baseCount;
                let categorySelect = { sideT: [], drinkT: [] }


                //시즈닝 체크
                seasCheck.forEach(cb => {
                    if (cb.checked) {
                        totalSum += 800;
                    }
                });

                let lists = document.querySelectorAll(".order");
                lists.forEach(list => {
                    let category = list.classList[1];
                    // console.log(category);
                    let items = list.querySelectorAll(".add");
                    items.forEach(item => {
                        let goodsName = item.querySelector(".menu p").innerHTML;
                        let price = parseInt(item.querySelector(".menu span").innerHTML.replace(/[^0-9]/g, ''));
                        let count = parseInt(item.querySelector(".counter span").innerHTML);
                        if (count > 0) {
                            totalSum += price * count;
                            categorySelect[category].push(goodsName);
                        }
                    })
                    console.log(categorySelect);
                })

                updateOption(".sideCategory strong", categorySelect.sideT);
                updateOption(".drinkCategory strong", categorySelect.drinkT);

                function updateOption(selector, cateItem) {
                    let selectorShow = document.querySelector(selector);
                    if (cateItem.length > 0) {
                        let extra = cateItem.length - 1;
                        selectorShow.innerHTML = `${cateItem[0]} ${extra > 0 ? `외 ${extra}개` : ""}`
                    }
                }
                total.innerHTML = totalSum.toLocaleString();
            }

            updateTotal();

            let counters = document.querySelectorAll(".counter");

            counters.forEach(counter => {
                let minus = counter.querySelector(".minus");
                let plus = counter.querySelector(".plus");
                let countNum = counter.querySelector("span");

                minus.addEventListener("click", () => {
                    let count = parseInt(countNum.innerText);
                    if (count > 0) {
                        count--;
                        countNum.innerText = count;
                        updateTotal();
                    }
                });

                plus.addEventListener("click", () => {
                    let count = parseInt(countNum.innerText);
                    count++;
                    countNum.innerText = count;
                    updateTotal();
                });
            });


            //결제창 글자
            const selectBasic = document.querySelector(".order_left h2");
            const showBasic = document.querySelector("#basic strong");
            showBasic.innerHTML = selectBasic.innerHTML;
        });
    </script>
</html>